<div class="modal-header">
  <h5 class="modal-title">Participate to Event</h5>
  <button type="button" class="close" (click)="onCancel()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body">
  <form (ngSubmit)="onSubmit()" #participationForm="ngForm">
    <!-- Personal Information -->
    <div class="row mb-3">
      <div class="col-md-6 form-group">
        <label for="name">First Name:</label>
        <input
          type="text"
          id="name"
          name="name"
          class="form-control"
          required
          [(ngModel)]="participant.name"
          #name="ngModel"
          [ngClass]="{
            'is-invalid': name.invalid && (name.dirty || name.touched)
          }"
        />
        <div
          *ngIf="name.invalid && (name.dirty || name.touched)"
          class="invalid-feedback"
        >
          First name is required.
        </div>
      </div>
      <div class="col-md-6 form-group">
        <label for="surname">Last Name:</label>
        <input
          type="text"
          id="surname"
          name="surname"
          class="form-control"
          required
          [(ngModel)]="participant.surname"
          #surname="ngModel"
          [ngClass]="{
            'is-invalid': surname.invalid && (surname.dirty || surname.touched)
          }"
        />
        <div
          *ngIf="surname.invalid && (surname.dirty || surname.touched)"
          class="invalid-feedback"
        >
          Last name is required.
        </div>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-6 form-group">
        <label for="email">Email:</label>
        <input
          type="email"
          id="email"
          name="email"
          class="form-control"
          required
          [(ngModel)]="participant.email"
          #email="ngModel"
          [ngClass]="{
            'is-invalid': email.invalid && (email.dirty || email.touched)
          }"
        />
        <div
          *ngIf="email.invalid && (email.dirty || email.touched)"
          class="invalid-feedback"
        >
          Valid email is required.
        </div>
      </div>
      <div class="col-md-6 form-group">
        <label for="phone">Phone:</label>
        <input
          type="tel"
          id="phone"
          name="phone"
          class="form-control"
          required
          [(ngModel)]="participant.phone"
          #phone="ngModel"
          [ngClass]="{
            'is-invalid': phone.invalid && (phone.dirty || phone.touched)
          }"
        />
        <div
          *ngIf="phone.invalid && (phone.dirty || phone.touched)"
          class="invalid-feedback"
        >
          Phone number is required.
        </div>
      </div>
    </div>

    <div class="card mb-3">
      <div class="card-header bg-light">
        <h6 class="mb-0">Payment Information</h6>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-6 form-group">
            <label for="paymentMethod">Payment Method:</label>
            <select
              id="paymentMethod"
              name="paymentMethod"
              class="form-control"
              required
              [(ngModel)]="participant.paymentMethod"
              #paymentMethod="ngModel"
              [ngClass]="{
                'is-invalid':
                  paymentMethod.invalid &&
                  (paymentMethod.dirty || paymentMethod.touched)
              }"
            >
              <option *ngFor="let m of paymentMethods" [ngValue]="m">
                {{ getPaymentMethodLabel(m) }}
              </option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <div class="d-flex justify-content-end">
      <button
        type="button"
        class="btn btn-outline-secondary me-2"
        (click)="onCancel()"
      >
        Cancel
      </button>
      <button
        type="submit"
        [disabled]="participationForm.invalid || isLoading"
        class="btn btn-primary"
      >
        <span *ngIf="!isLoading">Confirm Participation</span>
        <span *ngIf="isLoading" class="spinner-border spinner-border-sm"></span>
      </button>
    </div>
  </form>
</div>
